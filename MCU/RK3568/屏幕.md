###  **使用 `fbset` 查看屏幕信息**

bash

```
fbset -i
```

- 检查当前分辨率和帧缓冲设备（如 `/dev/fb0`）。

#### 屏幕起始时序

```
dsi0_panel: panel@0 {
		status = "okay";
		compatible = "simple-panel-dsi";
		reg = <0>;
		backlight = <&backlight>; 这个是背光pwm
		reset-delay-ms = <60>; 复位时间
		enable-delay-ms = <60>; 供电使能后的时间
		prepare-delay-ms = <60>;
		unprepare-delay-ms = <60>;
		disable-delay-ms = <60>;
		init-delay-ms = <60>; 复位以后等待多少时间下发参数
		reset-gpios = <&gpio0 RK_PC6 GPIO_ACTIVE_LOW>;  复位脚配置
		width-mm = <68>;
		height-mm = <121>;
		dsi,flags = <(MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_BURST |
			MIPI_DSI_MODE_LPM | MIPI_DSI_MODE_EOT_PACKET)>;
		dsi,format = <MIPI_DSI_FMT_RGB888>;
		dsi,lanes  = <4>; mipi lane数
		panel-init-sequence = [
			23 00 02 B0 01  //23是控制命令， 00是delay  02是参数个数 B0是厂商给的寄存器  01是寄存器的参数 后面的参数都是按这个排列的
			23 00 02 C0 26
			05 78 01 11 
			05 1E 01 29
		];

		panel-exit-sequence = [
			05 00 01 28 这个参数同上面一样格式，掉电需要刷的参数放这里，一般不用填或者修改
			05 00 01 10
		];

		disp_timings0: display-timings {
			native-mode = <&dsi0_timing0>;
			dsi0_timing0: timing0 {
				clock-frequency = <160000000>; 这个参数是htol x vtol x 帧率 htol=hactive+hbp+hfp+hsync
vtol=vactive+vbp+vfp+vbp
				hactive = <1200>;
				vactive = <1920>;
				hfront-porch = <60>; HFP
				hsync-len = <16>;  HSYNC
				hback-porch = <80>; HBP
				vfront-porch = <12>; VFP
				vsync-len = <8>; VSYNC
				vback-porch = <16>; VBP
				hsync-active = <0>;
				vsync-active = <0>;
				de-active = <0>;
				pixelclk-active = <1>;
			};
		};


&vcc3v3_lcd0_n {
	gpio = <&gpio1 RK_PB1 GPIO_ACTIVE_HIGH>; 这个供电控制，也可以按照reser脚的配置放在dsi0_panel节点下，在控制脚配置文件中解析应用
	enable-active-high;
};


u-boot/drivers/video/drm/rockchip_panel.c
这个里面是uboot中控制脚的配置
kernel/drivers/gpu/drm/panel/panel-simple.c
这个是kernel中的配置
对应的控制脚可按硬件配置
```

![image-20250807193540558](D:\WorkSpace\learning-record\MCU\RK3568\屏幕.assets\image-20250807193540558.png)


GMAC
```
&gmac1 {
	phy-mode = "rgmii";
	clock_in_out = "input";

	snps,reset-gpio = <&gpio2 RK_PD1 GPIO_ACTIVE_LOW>;
	snps,reset-active-low;
	/* Reset time is 20ms, 100ms for rtl8211f */
	snps,reset-delays-us = <0 20000 100000>;

	assigned-clocks = <&cru SCLK_GMAC1_RX_TX>, <&cru SCLK_GMAC1>;
	assigned-clock-parents = <&cru SCLK_GMAC1_RGMII_SPEED>, <&gmac1_clkin>;
	assigned-clock-rates = <0>, <125000000>;

	pinctrl-names = "default";
	pinctrl-0 = <&gmac1m1_miim
				&gmac1m1_tx_bus2
				&gmac1m1_rx_bus2
				&gmac1m1_rgmii_clk
				&gmac1m1_rgmii_bus
				&gmac1m1_clkinout>;

	tx_delay = <0x4f>;
	rx_delay = <0x26>;
	
	phy-handle = <&rgmii_phy1>;
	status = "okay";
};
&mdio1 {
	rgmii_phy1: phy@0 {
		compatible = "ethernet-phy-ieee802.3-c22";
		reg = <0x0>;
	};
};


&gmac1 {
	phy-mode = "rgmii";
	clock_in_out = "output";
	snps,reset-gpio = <&gpio2 RK_PD1 GPIO_ACTIVE_LOW>;
	snps,reset-active-low;
	/* Reset time is 20ms, 100ms for rtl8211f */
	snps,reset-delays-us = <0 20000 100000>;
	assigned-clocks = <&cru SCLK_GMAC1_RX_TX>, <&cru SCLK_GMAC1>;
	assigned-clock-parents = <&cru SCLK_GMAC1_RGMII_SPEED>;
	assigned-clock-rates = <0>, <125000000>;
	pinctrl-names = "default";
	pinctrl-0 = <&gmac1m1_miim
	&gmac1m1_tx_bus2
	&gmac1m1_rx_bus2
	&gmac1m1_rgmii_clk
	&gmac1m1_rgmii_bus>;
	tx_delay = <0x4f>;
	rx_delay = <0x26>;
	phy-handle = <&rgmii_phy1>;
	status = "okay";
};

&gmac1 {
	phy-mode = "rgmii";
	clock_in_out = "output";
	snps,reset-gpio = <&gpio2 RK_PD1 GPIO_ACTIVE_LOW>;
	snps,reset-active-low;

	/* Reset time is 20ms, 100ms for rtl8211f */
	snps,reset-delays-us = <0 20000 100000>;
	assigned-clocks = <&cru SCLK_GMAC1_RX_TX>, <&cru SCLK_GMAC1>, <&cru
	CLK_MAC1_OUT>;
	assigned-clock-parents = <&cru SCLK_GMAC1_RGMII_SPEED>;
	assigned-clock-rates = <0>, <125000000>, <25000000>;
	pinctrl-names = "default";
	pinctrl-0 = <&gmac1m1_miim
		&gmac1m1_tx_bus2
		&gmac1m1_rx_bus2
		&gmac1m1_rgmii_clk
		&gmac1m1_rgmii_bus
		&eth1m1_pins>;
	tx_delay = <0x4f>;
	rx_delay = <0x26>;
	phy-handle = <&rgmii_phy1>;
	status = "okay";
};
&mdio1 {
rgmii_phy1: phy@0 {
compatible = "ethernet-phy-ieee802.3-c22";
reg = <0x0>;
+ clocks = <&cru CLK_MAC1_OUT>;
};
};



&gmac1 {
	phy-mode = "rgmii";
	clock_in_out = "input";
	snps,reset-gpio = <&gpio2 RK_PD1 GPIO_ACTIVE_LOW>;
	snps,reset-active-low;

	/* Reset time is 20ms, 100ms for rtl8211f */
	snps,reset-delays-us = <0 20000 100000>;
	assigned-clocks = <&cru SCLK_GMAC1_RX_TX>, <&cru SCLK_GMAC1>, <&cru
	CLK_MAC1_OUT>;
	assigned-clock-parents = <&cru SCLK_GMAC1_RGMII_SPEED>, <&gmac1_clkin>;
	assigned-clock-rates = <0>, <125000000>, <25000000>;
	pinctrl-names = "default";
	pinctrl-0 = <&gmac1m1_miim
		&gmac1m1_tx_bus2
		&gmac1m1_rx_bus2
		&gmac1m1_rgmii_clk
		&gmac1m1_rgmii_bus
		&eth1m1_pins
		&gmac1m1_clkinout>;

	tx_delay = <0x4f>;
	rx_delay = <0x26>;

	phy-handle = <&rgmii_phy1>;
	status = "okay";
};

```



